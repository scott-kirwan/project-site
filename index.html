<!doctype html>
<html lang="en">
  <head>
    <!-- Google Tag Manager -->
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.defer=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-WXM4BDT8');
    </script>
    <!-- End Google Tag Manager -->

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Rulya team sports finder</title>

    <!-- Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WXM4BDT8"
      height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- ================= HERO ================= -->
    <section class="hero" aria-label="Hero">
      <!-- Background video (upload: videos/hero-bg.mp4) -->
      <video class="hero-video" autoplay muted loop playsinline preload="none" poster="images/poster-image.jpeg">
  <source src="videos/main-video.mp4" type="video/mp4" />
</video>

      <!-- Blue overlay (same tint as original hero image setup) -->
      <div class="hero-overlay" aria-hidden="true"></div>

      <div class="hero-logo" aria-label="Rulya logo">
        <img src="images/logo.png" alt="Rulya" />
      </div>

      <div class="container hero-content">
        <h1>Get the ball rolling</h1>

        <p class="hero-subtext">Instantly book local courts, join active matches, and connect with other players across Dublin.</p>

        <form class="waitlist-form hero-waitlist" action="#" method="post" novalidate>
          <label class="sr-only" for="hero-email">Email</label>

          <div class="waitlist-row">
            <input
              id="hero-email"
              name="email"
              type="email"
              inputmode="email"
              autocomplete="email"
              placeholder="123@xxx.com"
              required
              aria-describedby="hero-error hero-success"
            />

            <button type="submit" class="btn btn-primary">Join Waitlist</button>
          </div>

          <p class="waitlist-error" id="hero-error" data-error hidden>Please provide a valid email to join the waitlist.</p>
          <p class="waitlist-success" id="hero-success" data-success hidden>You’re in.</p>
        </form>
</div>
    </section>

    <!-- ================= HERO (TEXT ONLY / SOLID BACKGROUND) ================= -->
    <section class="hero hero--plain" aria-label="Intro">
      <div class="container origin">
        <div class="origin-media" aria-hidden="true">
         <img src="images/origin-seagull.png" alt="" width="420" height="420" loading="lazy" />
        </div>

        <div class="origin-copy">
          <h2 class="plain-hero-title">Our Origin Story</h2>
          <p class="plain-hero-sub">“Rulya” is Irish slang for wild. We chose the seagull because nobody respects the hustle quite like they do. Clock out and bring that exact same zero-hesitation energy to the court.</p>
        </div>
      </div>
    </section>

    <!-- ================= FEATURES / BENEFITS ================= -->
<section id="benefits" style="padding: 60px 0; background-color: #f8fafc; overflow: hidden;">
  <style>
    /* Default Desktop Styles */
    .benefits-flex-container {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 40px;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .phone-mockup {
      width: 420px;
      height: 800px;
      border: none;
      border-radius: 40px;
      box-shadow: 0 25px 50px rgba(0,0,0,0.15);
    }

    /* Mobile Optimization: Ensuring both fit on one screen */
    @media (max-width: 768px) {
      #benefits {
        padding: 30px 0 !important;
      }
      .benefits-flex-container {
        flex-direction: column !important;
        gap: 20px !important;
        text-align: center;
      }
      .text-content {
        min-width: unset !important;
        flex: unset !important;
      }
      /* We keep the font family from your class but scale size for mobile visibility */
      #main-heading {
        font-size: 28px !important; 
        margin-bottom: 15px !important;
        line-height: 1.2 !important;
      }
      .btn-primary {
        padding: 12px 24px !important;
      }
      .mockup-container {
        min-width: unset !important;
        width: 100%;
        margin-top: 0 !important;
      }
      .phone-mockup {
        width: 320px !important;
        height: 580px !important;
        transform: scale(0.85); /* Slightly larger scale than before */
        transform-origin: top center;
        margin-bottom: -80px; /* Adjusting for the scale overlap */
      }
    }
  </style>

  <div class="benefits-flex-container">
    <div class="text-content" style="flex: 1; min-width: 320px;"> 
      <h2 id="main-heading" class="plain-hero-title" style="color: #1e293b; margin-bottom: 24px; line-height: 1.1;">
        Everything you need to play, in one app.
      </h2>
      
      <ul id="benefit-list" style="list-style: none; padding: 0; margin: 0;"></ul>

      <a href="#waitlist" class="btn btn-primary" style="padding: 16px 32px; border-radius: 12px; background-color: #F16D34; color: white; text-decoration: none; display: inline-block; font-weight: bold;">
        Join Waitlist
      </a>
    </div>

    <div class="mockup-container" style="flex: 1; min-width: 320px; display: flex; justify-content: center;">
      <iframe src="https://v0-rulya-social-booking-app-i2e1.vercel.app" class="phone-mockup" loading="lazy"></iframe>
    </div>
  </div>

  <script>
    window.addEventListener("message", (event) => {
      const heading = document.getElementById("main-heading");
      const list = document.getElementById("benefit-list");

      switch (event.data) {
        case "connect":
          heading.innerText = "Everything you need to play, in one app.";
          list.innerHTML = ""; 
          break;
        case "courts":
          heading.innerText = "Find courts near you";
          list.innerHTML = "";
          break;
        case "sports":
          heading.innerText = "Choose between different sports";
          list.innerHTML = "";
          break;
      }
    });
  </script>
</section>
    <!-- ================= SIGNUP ================= -->
    <section id="waitlist" class="section section-ice" aria-label="Waitlist">
      <div class="container signup">
        <div class="signup-left">
          <h2>Stop cancelling. Start playing.</h2>
          <p class="signup-subtext">Join the waitlist now.</p>

          <!-- Styled form (we can post to Google Sheets/Forms underneath later) -->
          <form class="waitlist-form" action="#" method="post" novalidate>
            <label class="sr-only" for="waitlist-email">Email</label>

            <div class="waitlist-row">
              <input
                id="waitlist-email"
                name="email"
                type="email"
                inputmode="email"
                autocomplete="email"
                placeholder="123@xxx.com"
                required
                aria-describedby="waitlist-error waitlist-success"
              />

              <button type="submit" class="btn btn-primary">Join Waitlist</button>
            </div>

            <p class="waitlist-error" id="waitlist-error" data-error hidden>Please provide a valid email to join the waitlist.</p>
            <p class="waitlist-success" id="waitlist-success" data-success hidden>You’re in. We’ll email you when your first games go live.</p>
          </form>
        </div>

        <!-- Visual placeholder (swap image later) -->
        <div class="signup-visual" aria-hidden="true"></div>
      </div>
    </section>
    <!-- ================= PERSONA CAROUSEL ================= -->
    <section class="section section-ice personas" aria-label="Personas">
      <div class="personas-inner">
        <div class="personas-carousel" data-persona-carousel>

          <div class="personas-track" data-persona-track aria-roledescription="carousel">
            <!-- Persona 1 -->
            <article class="persona-card is-active" data-persona-slide
              data-name="Young Professional"
              data-headline="After work shouldn’t mean after 10 messages."
              data-sub="You’ve the energy. You’ve the schedule. You just don’t have the group chat organised."
              data-trigger="Game found in 2 taps. Court booked. Cost split"
              data-cta="Join waitlist">
              <div class="persona-stack" aria-hidden="true">
                <div class="persona-img persona-img--top" aria-hidden="true"></div>
                <div class="persona-img persona-img--bottom" aria-hidden="true"></div>
              </div>

              <div class="persona-overlay" aria-live="polite">
                <p class="persona-name">Young Professional</p>
                <h2 class="persona-headline">After work shouldn’t mean after 10 messages.</h2>
                <p class="persona-sub">You’ve the energy. You’ve the schedule. You just don’t have the group chat organised.</p>
                <p class="persona-trigger">Game found in 2 taps. Court booked. Cost split</p>
                <a class="btn btn-primary" href="#waitlist">Join waitlist</a>
              </div>
            </article>

            <!-- Persona 2 -->
            <article class="persona-card" data-persona-slide
              data-name="Expat / New in Dublin"
              data-headline="New city. No squad."
              data-sub="You didn’t move countries to stay in."
              data-trigger="Casual badminton 2km away. 4 spots left."
              data-cta="Join waitlist">
              <div class="persona-stack" aria-hidden="true">
                <div class="persona-img persona-img--top" aria-hidden="true"></div>
                <div class="persona-img persona-img--bottom" aria-hidden="true"></div>
              </div>
              <div class="persona-overlay" aria-hidden="true"></div>
            </article>

            <!-- Persona 3 -->
            <article class="persona-card" data-persona-slide
              data-name="Student"
              data-headline="Midday class break? Tight budget?"
              data-sub="Daytime courts. Student-friendly pricing."
              data-trigger="4 players × €8. Split automatically"
              data-cta="Join waitlist">
              <div class="persona-stack" aria-hidden="true">
                <div class="persona-img persona-img--top" aria-hidden="true"></div>
                <div class="persona-img persona-img--bottom" aria-hidden="true"></div>
              </div>
              <div class="persona-overlay" aria-hidden="true"></div>
            </article>
          </div>

          </div>
      </div>
    </section>

    <!-- ================= FOOTER ================= -->
    <footer class="footer">
      <div class="container footer-grid">

        <div class="footer-col footer-col--links">
          <p class="footer-heading">Quick links</p>
          <nav class="footer-links" aria-label="Quick links">
            <a href="#">Additional menu item</a>
            <a href="#">Additional menu item</a>
            <a href="#">Additional menu item</a>
          </nav>
        </div>

        <div class="footer-col footer-col--social">
          <p class="footer-heading">Social</p>
          <div class="footer-icons" aria-label="Social links">
            <a class="icon" href="#" aria-label="Instagram">
              <img src="images/instagram.png" alt="Instagram">
            </a>
            <a class="icon" href="#" aria-label="LinkedIn">
              <img src="images/linkedin.png" alt="LinkedIn">
            </a>
            <a class="icon" href="#" aria-label="TikTok">
              <img src="images/tiktok.png" alt="TikTok">
            </a>
          </div>
        </div>

      </div>
    </footer>

    <!-- ================= BENEFITS SCRIPT ================= -->
    <script>
      (function () {
        const root = document.querySelector('[data-carousel]');
        if (!root) return;

        const slides = Array.from(root.querySelectorAll('[data-slide]'));
        const tabs = Array.from(root.querySelectorAll('[data-tab]'));

        let currentIndex = 0;

        function update() {
          tabs.forEach((tab, i) => {
            const active = i === currentIndex;
            tab.classList.toggle('is-active', active);
            tab.setAttribute('aria-selected', active ? 'true' : 'false');
          });

          slides.forEach((slide, i) => {
            slide.classList.toggle('is-active', i === currentIndex);
          });
        }

        function goTo(index) {
          currentIndex = (index + slides.length) % slides.length;
          update();
        }

        tabs.forEach((tab) => {
          tab.addEventListener('click', () => {
            const idx = Number(tab.getAttribute('data-tab'));
            if (!Number.isNaN(idx)) goTo(idx);
          });
        });

        update();
      })();
    </script>

    <!-- ================= WAITLIST SCRIPT ================= -->
    <script>
      (function () {
        const forms = Array.from(document.querySelectorAll('.waitlist-form'));
        if (!forms.length) return;

        const FORM_ENDPOINT = 'https://docs.google.com/forms/d/e/1FAIpQLSdFKlPUzqqatqOZuyYkz--8ABrA1dQ-wD-i5rlxLm02iBipzw/formResponse';
        const FORM_FIELD = 'entry.1326819543';

        function isEmailValid(input) {
          // Uses native browser validation for type="email".
          // Also trims whitespace so " test@x.com " doesn't fail.
          const v = (input.value || '').trim();
          input.value = v;
          return v.length > 0 && input.checkValidity();
        }

        forms.forEach((form) => {
          const input = form.querySelector('input[type="email"]');
          const success = form.querySelector('[data-success]');
          const error = form.querySelector('[data-error]');

          if (!input || !success || !error) return;

          function resetMessages() {
            success.hidden = true;
            error.hidden = true;
          }

          form.addEventListener('submit', async function (e) {
            e.preventDefault();

            resetMessages();

            if (!input.value || !input.value.trim()) {
              error.textContent = 'Please provide your email to join the waitlist.';
              error.hidden = false;
              input.focus();
              return;
            }

            if (!isEmailValid(input)) {
              error.textContent = 'Please provide a valid email to join the waitlist.';
              error.hidden = false;
              input.focus();
              return;
            }

            // Send to Google Forms (stores in Google Sheets)
            // NOTE: This uses mode:no-cors, so we can't read a success response.
            // We treat 'no network error thrown' as success.
            try {
              const fd = new FormData();
              fd.append(FORM_FIELD, input.value);

              await fetch(FORM_ENDPOINT, {
                method: 'POST',
                mode: 'no-cors',
                body: fd,
              });
            } catch (err) {
              error.textContent = 'Something went wrong. Please try again.';
              error.hidden = false;
              return;
            }

            success.hidden = false;

            // Fire GTM event ONLY on valid submit
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
              event: 'waitlist_submit',
              form_location: form.classList.contains('hero-waitlist') ? 'hero' : 'waitlist_section',
            });

            input.value = '';
          });

          input.addEventListener('input', function () {
            if (error && !error.hidden) error.hidden = true;
          });
        });
      })();
    </script>

    <!-- ================= PERSONA CAROUSEL SCRIPT ================= -->
    <script>
      (function () {
        const carousel = document.querySelector('[data-persona-carousel]');
        const track = document.querySelector('[data-persona-track]');
        if (!carousel || !track) return;

        const intervalMs = 5200;
        let timer = null;
        let isAnimating = false;

        function slides() {
          return Array.from(track.querySelectorAll('[data-persona-slide]'));
        }

        function setActiveCenter() {
          const s = slides();
          s.forEach((el, i) => {
            const active = i === 1; // center is always index 1
            el.classList.toggle('is-active', active);

            const overlay = el.querySelector('.persona-overlay');
            if (!overlay) return;

            if (active) {
              overlay.removeAttribute('aria-hidden');
              overlay.innerHTML = `
                <p class="persona-name">${el.dataset.name}</p>
                <h2 class="persona-headline">${el.dataset.headline}</h2>
                <p class="persona-sub">${el.dataset.sub}</p>
                <p class="persona-trigger">${el.dataset.trigger}</p>
                <a class="btn btn-primary" href="#waitlist">${el.dataset.cta}</a>
              `;
            } else {
              overlay.setAttribute('aria-hidden', 'true');
              overlay.innerHTML = '';
            }
          });
        }

        function measureStep() {
          const s = slides();
          if (s.length < 3) return { step: 0, pad: 0 };

          const first = s[0].getBoundingClientRect();
          const second = s[1].getBoundingClientRect();
          const gap = Math.max(0, Math.round(second.left - first.right));
          const step = Math.round(first.width + gap);

          const viewportW = carousel.getBoundingClientRect().width;
          const pad = Math.max(0, Math.round((viewportW - first.width) / 2));

          return { step, pad };
        }

        function applyCentering() {
          const { step, pad } = measureStep();
          if (!step) return;

          track.classList.add('is-no-anim');
          track.style.paddingLeft = pad + 'px';
          track.style.paddingRight = pad + 'px';
          track.style.transform = `translateX(${-step}px)`; // center slide at index 1
          track.getBoundingClientRect(); // force reflow
          track.classList.remove('is-no-anim');
        }

        function shiftLeft() {
          if (isAnimating) return;
          const { step } = measureStep();
          if (!step) return;

          isAnimating = true;
          track.style.transform = `translateX(${-2 * step}px)`;

          const onEnd = () => {
            track.removeEventListener('transitionend', onEnd);

            // Move first slide to end (loop)
            const first = track.firstElementChild;
            if (first) track.appendChild(first);

            // Snap back to centered position (no animation)
            track.classList.add('is-no-anim');
            track.style.transform = `translateX(${-step}px)`;
            track.getBoundingClientRect(); // force reflow
            track.classList.remove('is-no-anim');

            setActiveCenter();
            isAnimating = false;
          };

          track.addEventListener('transitionend', onEnd);
        }

        function start() {
          if (timer) window.clearInterval(timer);
          timer = window.setInterval(shiftLeft, intervalMs);
        }

        // Init: reorder so persona 1 starts centered (index 1)
        const s0 = slides();
        if (s0.length >= 3) {
          const last = track.lastElementChild;
          if (last) track.insertBefore(last, track.firstElementChild);
        }

        setActiveCenter();
        applyCentering();
        start();

        window.addEventListener('resize', () => {
          applyCentering();
        });

        document.addEventListener('visibilitychange', () => {
          if (document.hidden) {
            if (timer) window.clearInterval(timer);
          } else {
            applyCentering();
            start();
          }
        });
      })();
    </script>
  </body>
</html>
